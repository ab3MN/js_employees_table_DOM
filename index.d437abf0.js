!function(){function e(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=document.querySelector("body"),s=document.querySelector("tbody"),u=document.querySelector("thead tr"),l=function(e){return"\n        <tr>\n          <td>".concat(e.name,"</td>\n          <td>").concat(e.position,"</td>\n          <td>").concat(e.office,"</td>\n          <td>").concat(e.age,"</td>\n          <td>").concat(e.salary,"</td>\n        </tr>")};function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=document.querySelector("body"),d=function(e,t){var n,r=document.createElement(e);return(n=r.classList).add.apply(n,p(t)),r},m=function(e,t){var n=d("div",["notification",e]);n.dataset.qa="notification",n.innerHTML='<h2 class="title">'.concat(t,"</h2>"),y.append(n),setTimeout(function(){n.style.display="none"},2e3)},h=function(e){return e.replace(/[$,]/g,"")},v=function(e){for(var t="",n=0,r=String(e),o=r.length-1;o>=0;o--)t+=r[o],(n+=1)%3==0&&0!==o&&(t+=",");return"$".concat(t.split("").reverse().join(""))},b=new(function(){function e(){var n=this;t(this,e),o(this,"state",{name:null,position:null,office:null,age:null,salary:null}),o(this,"handleSubmit",function(e){if(e.preventDefault(),n.isValid()){var t=l(n.state);s.innerHTML+=t,m("success","The ".concat(n.state.name," was added")),n.reset(),e.target.reset()}}),o(this,"handleChange",function(e){"salary"===e.target.name?n.state[e.target.name]=v(e.target.value):n.state[e.target.name]=e.target.value})}return r(e,[{key:"createForm",value:function(){var e=document.createElement("form");return e.classList.add("new-employee-form"),e.innerHTML='\n      <label for="name">\n        Name:\n        <input\n          data-qa="name"\n          type="text"\n          name="name"\n          id="name"\n        />\n      </label>\n\n      <label for="position">\n        Position:\n        <input\n          data-qa="position"\n          type="text"\n          name="position"\n          id="position"\n        />\n      </label>\n\n      <label for="office">\n        Office:\n        <select name="office" data-qa="office">\n          <option\n            value="Tokyo"\n            selected\n          >\n            Tokyo\n          </option>\n          <option value="Singapore">Singapore</option>\n          <option value="London">London</option>\n          <option value="New York">New York</option>\n          <option value="Edinburgh">Edinburgh</option>\n          <option value="San Francisco">San Francisco</option>\n        </select>\n      </label>\n\n      <label for="age">\n        Age:\n        <input\n          data-qa="age"\n          type="number"\n          name="age"\n          id="age"\n        />\n      </label>\n\n      <label for="salary">\n        Salary:\n        <input\n          data-qa="salary"\n          type="number"\n          name="salary"\n          id="salary"\n        />\n      </label>\n\n      <button type="submit">Save to table</button>',e.addEventListener("submit",this.handleSubmit),e.addEventListener("change",this.handleChange),e}},{key:"isValid",value:function(){var e=this.state,t=e.age,n=e.position,r=e.office,o=e.salary;return this.state.name&&n&&t&&r&&o?this.state.name.length<4?(m("error","Minimum name length is 4 "),!1):isNaN(this.state.name)&&isNaN(n)?!(t<18)&&!(t>90)||(m("error","Age must be greater than 18 and less than 90"),!1):(m("error","Name and position must be string"),!1):(m("error","All the fields are required"),!1)}},{key:"reset",value:function(){this.state={name:null,position:null,office:null,age:null,salary:null}}}]),e}()),g={0:"name",1:"position",2:"office",3:"age",4:"salary"},w=function(){function e(){var n=this;t(this,e),o(this,"activeRow",null),o(this,"employees",[]),o(this,"drawEmployeeView",function(e){s.innerHTML=n.createTemplate(e)}),this.employees=this.getEmployeesData(),this.addRowListeners(),c.append(b.createForm())}return r(e,[{key:"createTemplate",value:function(e){return e.map(function(e){return l(e)}).join("")}},{key:"getEmployeesData",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,a=s.rows[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value,c=Array.from(i.cells).reduce(function(e,t,n){return e[g[n]]=t.textContent,e},{});e.push(c)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e}},{key:"addRowListeners",value:function(){var e=this;s.addEventListener("click",function(t){var n=t.target.closest("tr");n&&e.changeActiveRow(n)})}},{key:"changeActiveRow",value:function(e){this.activeRow&&this.activeRow!==e&&this.activeRow.classList.remove("active"),this.activeRow=e,this.activeRow.classList.add("active")}}]),e}(),S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return"asc"===n?p(e).sort(function(e,n){return e[t]-n[t]}):p(e).sort(function(e,n){return n[t]-e[t]})},E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";return"asc"===n?p(e).sort(function(e,n){return e[t].localeCompare(n[t])}):p(e).sort(function(e,n){return n[t].localeCompare(e[t])})},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return"asc"===t?p(e).sort(function(e,t){return h(e.salary)-h(t.salary)}):p(e).sort(function(e,t){return h(t.salary)-h(e.salary)})},L=new(function(){function e(){t(this,e)}return r(e,[{key:"sortEmployees",value:function(e,t,n){switch(t){case"name":case"position":case"office":return E(e,t,n);case"age":return S(e,t,n);case"salary":return T(e,n);default:throw Error("Wrong type!")}}}]),e}());new(function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(l,n);var c,s=(c=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var t,n=i(l);return t=c?Reflect.construct(n,arguments,i(this).constructor):n.apply(this,arguments),t&&("object"==(t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t)||"function"==typeof t)?t:e(this)});function l(){var n;return t(this,l),o(e(n=s.call(this)),"active",null),o(e(n),"sortType",{name:"asc",position:"asc",office:"asc",age:"asc",salary:"asc"}),n.addListener(),n.sortEmployees=L.sortEmployees,n}return r(l,[{key:"addListener",value:function(){var e=this;u.addEventListener("click",function(t){var n=t.target.textContent.toLowerCase();e.setSortType(n),e.employees=e.sortEmployees(e.employees,n,e.sortType[n]),e.drawEmployeeView(e.employees)})}},{key:"setSortType",value:function(e){if(e!==this.active){this.sortType[e]="asc",this.active=e;return}this.sortType[e]="asc"===this.sortType[e]?"desc":"asc",this.active=e}}]),l}(w))}();
//# sourceMappingURL=index.d437abf0.js.map
